{"ast":null,"code":"import { LOGIN_USER, LOGOUT_USER, UPDATE_LOGIN_USER, UPDATE_TEMP_ROLE, UPDATE_VIEW, APP_LANGUAGE } from '../actions/auth.action';\nimport { Communications, localStore } from '../../helpers';\nconst initialData = {\n  user: undefined,\n  token: undefined,\n  view: localStore.getItem('view') || undefined,\n  language: \"en\"\n};\n\nconst authReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialData;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case LOGIN_USER:\n      state = { ...state,\n        user: action.user,\n        token: action.token\n      };\n      localStore.setItem('currentUser', action.user); // localStore.setItem('roleAccess', action.user.role);\n\n      localStore.setItem('token', action.token);\n      Communications.updateLoginUserTokenSubject.next(action.token);\n      return state;\n\n    case UPDATE_LOGIN_USER:\n      state = { ...state,\n        user: action.user\n      };\n      localStore.setItem('currentUser', action.user);\n      return state;\n\n    case UPDATE_TEMP_ROLE:\n      state.user = { ...state.user,\n        role: action.role\n      };\n      return state;\n\n    case UPDATE_VIEW:\n      state = { ...state,\n        view: action.view\n      };\n      localStore.setItem('view', action.view);\n      return state;\n\n    case APP_LANGUAGE:\n      state = { ...state,\n        language: action.lang\n      };\n      localStore.setItem('language', action.lang);\n      return state;\n\n    case LOGOUT_USER:\n      localStore.removeItem('currentUser');\n      localStore.removeItem('token');\n      localStore.removeItem('roleAccess');\n      localStore.removeItem('view');\n      localStore.removeItem('language');\n      localStore.removeItem('image_url');\n      state = {\n        user: undefined,\n        token: undefined\n      };\n      Communications.updateLoginUserTokenSubject.next();\n      return state;\n\n    default:\n      return state;\n  }\n};\n\nexport default authReducer;","map":{"version":3,"sources":["/Users/divya/Documents/practice/react-alten-app/src/store/reducers/auth.reducer.ts"],"names":["LOGIN_USER","LOGOUT_USER","UPDATE_LOGIN_USER","UPDATE_TEMP_ROLE","UPDATE_VIEW","APP_LANGUAGE","Communications","localStore","initialData","user","undefined","token","view","getItem","language","authReducer","state","action","type","setItem","updateLoginUserTokenSubject","next","role","lang","removeItem"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,WAArB,EAAkCC,iBAAlC,EAAqDC,gBAArD,EAAuEC,WAAvE,EAAmFC,YAAnF,QAAuG,wBAAvG;AACA,SAASC,cAAT,EAAyBC,UAAzB,QAA2C,eAA3C;AASA,MAAMC,WAAuB,GAAG;AAC5BC,EAAAA,IAAI,EAAEC,SADsB;AAE5BC,EAAAA,KAAK,EAAED,SAFqB;AAG5BE,EAAAA,IAAI,EAAEL,UAAU,CAACM,OAAX,CAAmB,MAAnB,KAA8BH,SAHR;AAI5BI,EAAAA,QAAQ,EAAC;AAJmB,CAAhC;;AAOA,MAAMC,WAAW,GAAG,YAAkD;AAAA,MAAjDC,KAAiD,uEAAzCR,WAAyC;AAAA,MAA5BS,MAA4B;;AAClE,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKlB,UAAL;AACIgB,MAAAA,KAAK,GAAG,EAAE,GAAGA,KAAL;AAAYP,QAAAA,IAAI,EAAEQ,MAAM,CAACR,IAAzB;AAA+BE,QAAAA,KAAK,EAAEM,MAAM,CAACN;AAA7C,OAAR;AACAJ,MAAAA,UAAU,CAACY,OAAX,CAAmB,aAAnB,EAAkCF,MAAM,CAACR,IAAzC,EAFJ,CAGI;;AACAF,MAAAA,UAAU,CAACY,OAAX,CAAmB,OAAnB,EAA4BF,MAAM,CAACN,KAAnC;AACAL,MAAAA,cAAc,CAACc,2BAAf,CAA2CC,IAA3C,CAAgDJ,MAAM,CAACN,KAAvD;AACA,aAAOK,KAAP;;AACJ,SAAKd,iBAAL;AACIc,MAAAA,KAAK,GAAG,EAAE,GAAGA,KAAL;AAAYP,QAAAA,IAAI,EAAEQ,MAAM,CAACR;AAAzB,OAAR;AACAF,MAAAA,UAAU,CAACY,OAAX,CAAmB,aAAnB,EAAkCF,MAAM,CAACR,IAAzC;AACA,aAAOO,KAAP;;AACJ,SAAKb,gBAAL;AACIa,MAAAA,KAAK,CAACP,IAAN,GAAa,EACT,GAAGO,KAAK,CAACP,IADA;AAETa,QAAAA,IAAI,EAAEL,MAAM,CAACK;AAFJ,OAAb;AAIA,aAAON,KAAP;;AACJ,SAAKZ,WAAL;AACIY,MAAAA,KAAK,GAAG,EACJ,GAAGA,KADC;AAEJJ,QAAAA,IAAI,EAAEK,MAAM,CAACL;AAFT,OAAR;AAIAL,MAAAA,UAAU,CAACY,OAAX,CAAmB,MAAnB,EAA2BF,MAAM,CAACL,IAAlC;AACA,aAAOI,KAAP;;AACJ,SAAKX,YAAL;AACIW,MAAAA,KAAK,GAAC,EACF,GAAGA,KADD;AAEFF,QAAAA,QAAQ,EAACG,MAAM,CAACM;AAFd,OAAN;AAIAhB,MAAAA,UAAU,CAACY,OAAX,CAAmB,UAAnB,EAA+BF,MAAM,CAACM,IAAtC;AACC,aAAOP,KAAP;;AACL,SAAKf,WAAL;AACIM,MAAAA,UAAU,CAACiB,UAAX,CAAsB,aAAtB;AACAjB,MAAAA,UAAU,CAACiB,UAAX,CAAsB,OAAtB;AACAjB,MAAAA,UAAU,CAACiB,UAAX,CAAsB,YAAtB;AACAjB,MAAAA,UAAU,CAACiB,UAAX,CAAsB,MAAtB;AACAjB,MAAAA,UAAU,CAACiB,UAAX,CAAsB,UAAtB;AACAjB,MAAAA,UAAU,CAACiB,UAAX,CAAsB,WAAtB;AACAR,MAAAA,KAAK,GAAG;AACJP,QAAAA,IAAI,EAAEC,SADF;AAEJC,QAAAA,KAAK,EAAED;AAFH,OAAR;AAIAJ,MAAAA,cAAc,CAACc,2BAAf,CAA2CC,IAA3C;AACA,aAAOL,KAAP;;AACJ;AACI,aAAOA,KAAP;AA9CR;AAgDH,CAjDD;;AAmDA,eAAeD,WAAf","sourcesContent":["import { LOGIN_USER, LOGOUT_USER, UPDATE_LOGIN_USER, UPDATE_TEMP_ROLE, UPDATE_VIEW,APP_LANGUAGE } from '../actions/auth.action';\r\nimport { Communications, localStore } from '../../helpers';\r\n\r\nexport interface AuthParams {\r\n    user?: any;\r\n    token?: string;\r\n    view?: string;\r\n    language?:string;\r\n}\r\n\r\nconst initialData: AuthParams = {\r\n    user: undefined,\r\n    token: undefined,\r\n    view: localStore.getItem('view') || undefined,\r\n    language:\"en\",\r\n};\r\n\r\nconst authReducer = (state = initialData, action: any): AuthParams => {\r\n    switch (action.type) {\r\n        case LOGIN_USER:\r\n            state = { ...state, user: action.user, token: action.token };\r\n            localStore.setItem('currentUser', action.user);\r\n            // localStore.setItem('roleAccess', action.user.role);\r\n            localStore.setItem('token', action.token);\r\n            Communications.updateLoginUserTokenSubject.next(action.token);\r\n            return state;\r\n        case UPDATE_LOGIN_USER:          \r\n            state = { ...state, user: action.user };\r\n            localStore.setItem('currentUser', action.user);\r\n            return state;\r\n        case UPDATE_TEMP_ROLE:\r\n            state.user = {\r\n                ...state.user,\r\n                role: action.role\r\n            };\r\n            return state;\r\n        case UPDATE_VIEW:\r\n            state = {\r\n                ...state,\r\n                view: action.view\r\n            };\r\n            localStore.setItem('view', action.view);\r\n            return state;\r\n        case APP_LANGUAGE:\r\n            state={\r\n                ...state,\r\n                language:action.lang\r\n            }\r\n            localStore.setItem('language', action.lang);\r\n             return state;\r\n        case LOGOUT_USER:\r\n            localStore.removeItem('currentUser');\r\n            localStore.removeItem('token');\r\n            localStore.removeItem('roleAccess');\r\n            localStore.removeItem('view');\r\n            localStore.removeItem('language');\r\n            localStore.removeItem('image_url');\r\n            state = {\r\n                user: undefined,\r\n                token: undefined\r\n            };\r\n            Communications.updateLoginUserTokenSubject.next();\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default authReducer;\r\n"]},"metadata":{},"sourceType":"module"}